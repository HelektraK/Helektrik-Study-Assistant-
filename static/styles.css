body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: #f4f4fb;
}

.app-shell { max-width: 1100px; margin: 0 auto; padding: 24px; }
h1 { font-size: 28px; margin-bottom: 8px; }
.subtitle { color: #555; margin-bottom: 24px; }
.layout { display: grid; grid-template-columns: 1.2fr 1.8fr; gap: 20px; }
@media (max-width: 768px) { .layout { grid-template-columns: 1fr; } }

.card {
    background: white;
    border-radius: 12px;
    padding: 16px 20px;
    box-shadow: 0 1px 3px rgba(15,23,42,0.08);
    border: 1px solid #e2e8f0;
}
.card h2 { font-size: 18px; margin-top: 0; margin-bottom: 12px; }

.upload-box {
    border: 2px dashed #cbd5f5;
    border-radius: 10px;
    padding: 16px;
    text-align: center;
    background: #f9fafb;
    margin-bottom: 12px;
}
.upload-box input[type="file"] { margin-top: 8px; }
.file-limits { font-size: 12px; color: #888; margin-top: 4px; }

button.primary {
    background: #4f46e5; color: white; border: none;
    border-radius: 8px; padding: 10px 16px;
    font-weight: 600; cursor: pointer; font-size: 14px;
}
button.primary:disabled { opacity: 0.6; cursor: not-allowed; }
button.primary:hover:not(:disabled) { background: #4338ca; }

button.study-btn {
    background: white; color: #4f46e5;
    border: 2px solid #c7d2fe; border-radius: 20px;
    padding: 10px 20px; font-weight: 600;
    cursor: pointer; font-size: 14px; transition: all 0.2s ease;
}
button.study-btn:disabled { opacity: 0.5; cursor: not-allowed; }
button.study-btn:hover:not(:disabled):not(.active) { background: #eef2ff; border-color: #a5b4fc; }
button.study-btn.active { background: #4f46e5; color: white; border-color: #4f46e5; }

button.secondary {
    background: white; color: #4f46e5;
    border: 1px solid #cbd5f5; border-radius: 8px;
    padding: 8px 14px; font-weight: 500; cursor: pointer; font-size: 13px;
}
button.secondary:hover { background: #eef2ff; }
button.secondary.recording {
    background: #fef2f2; border-color: #f87171; color: #dc2626;
    animation: pulse 1.5s infinite;
}
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }

/* File list with delete buttons (KG9) */
.file-list { list-style: none; padding: 0; margin: 0; }
.file-item {
    display: flex; justify-content: space-between; align-items: center;
    padding: 10px 12px; background: #f9fafb;
    border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 8px;
}
.file-info { display: flex; flex-direction: column; gap: 2px; }
.file-type { font-size: 12px; color: #6b7280; }
.delete-btn {
    background: transparent; border: 1px solid #e5e7eb;
    border-radius: 6px; padding: 6px 10px; cursor: pointer;
    font-size: 14px; transition: all 0.2s ease;
}
.delete-btn:hover { background: #fef2f2; border-color: #fca5a5; }

/* Q&A Section */
.qa-section {
    margin-top: 20px; padding-top: 16px; border-top: 1px solid #e2e8f0;
}
.qa-section h3 { font-size: 14px; color: #4f46e5; margin-bottom: 10px; }
.qa-input-group { display: flex; gap: 8px; }
.qa-input-group input[type="text"] {
    flex: 1; padding: 10px 14px; border: 2px solid #c7d2fe;
    border-radius: 8px; font-size: 14px; outline: none; transition: border-color 0.2s;
}
.qa-input-group input[type="text"]:focus { border-color: #4f46e5; }
.qa-input-group input[type="text"]:disabled { background: #f3f4f6; cursor: not-allowed; }

.qa-response {
    background: #f9fafb; border: 1px solid #e5e7eb;
    border-radius: 8px; padding: 16px; margin-top: 10px;
}
.question-display {
    color: #4f46e5; font-weight: 500; margin-bottom: 12px;
    padding-bottom: 12px; border-bottom: 1px solid #e5e7eb;
}
.answer-display { line-height: 1.6; color: #374151; }

#results-panel { min-height: 250px; font-size: 14px; white-space: pre-wrap; }
.ai-output { line-height: 1.6; }

/* HTMX indicators */
.htmx-indicator { display: none !important; font-size: 13px; color: #6b21a8; }
.htmx-indicator.htmx-request {
    display: flex !important; flex-direction: column;
    align-items: center; padding: 20px;
}
.spinner {
    width: 24px; height: 24px; border: 3px solid #e2e8f0;
    border-top-color: #4f46e5; border-radius: 50%;
    animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.loading-text { margin-top: 12px; color: #6b21a8; font-size: 14px; font-weight: 500; }
.recording-indicator { color: #dc2626; font-weight: 500; animation: pulse 1.5s infinite; }

.transcription-progress {
    padding: 12px; background: #f5f3ff; border-radius: 8px; margin-top: 8px;
}
.progress-label { font-size: 13px; color: #4f46e5; margin-bottom: 8px; font-weight: 500; }
.progress-bar-container {
    width: 100%; height: 8px; background: #e2e8f0;
    border-radius: 4px; overflow: hidden;
}
.progress-bar-fill-animated {
    height: 100%;
    background: linear-gradient(90deg, #4f46e5, #7c3aed, #4f46e5);
    background-size: 200% 100%; border-radius: 4px;
    animation: shimmer 1.5s ease-in-out infinite;
}
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

.transcript-ready {
    display: flex; align-items: center; gap: 10px;
    padding: 12px; background: #f0fdf4; border-radius: 8px; margin-top: 8px;
}
.view-transcript-btn {
    background: #4f46e5; color: white; border: none;
    border-radius: 6px; padding: 8px 14px; font-weight: 600;
    cursor: pointer; font-size: 13px; margin-left: auto;
}
.view-transcript-btn:hover { background: #4338ca; }

/* Modal */
.modal-overlay {
    display: none; position: fixed; top: 0; left: 0;
    width: 100%; height: 100%; background: rgba(0,0,0,0.5);
    justify-content: center; align-items: center; z-index: 1000;
}
.modal-content {
    background: white; border-radius: 12px; width: 90%; max-width: 600px;
    max-height: 80vh; display: flex; flex-direction: column;
    box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
}
.modal-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 16px 20px; border-bottom: 1px solid #e2e8f0;
}
.modal-header h3 { margin: 0; font-size: 18px; color: #1f2937; }
.modal-close {
    background: none; border: none; font-size: 20px;
    cursor: pointer; color: #6b7280; padding: 4px 8px; border-radius: 4px;
}
.modal-close:hover { background: #f3f4f6; color: #1f2937; }
.modal-body { padding: 20px; overflow-y: auto; flex: 1; }
.transcript-text-box {
    background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px;
    padding: 16px; font-size: 14px; line-height: 1.6; color: #374151;
    white-space: pre-wrap; word-wrap: break-word; max-height: 300px; overflow-y: auto;
}
.modal-footer {
    display: flex; gap: 10px; padding: 16px 20px;
    border-top: 1px solid #e2e8f0; flex-wrap: wrap;
}
.btn-download {
    background: #10b981; color: white; border: none;
    border-radius: 6px; padding: 10px 16px; font-weight: 600;
    cursor: pointer; font-size: 13px;
}
.btn-download:hover { background: #059669; }
.btn-copy {
    background: #6366f1; color: white; border: none;
    border-radius: 6px; padding: 10px 16px; font-weight: 600;
    cursor: pointer; font-size: 13px;
}
.btn-copy:hover { background: #4f46e5; }
.btn-close {
    background: #f3f4f6; color: #374151; border: 1px solid #d1d5db;
    border-radius: 6px; padding: 10px 16px; font-weight: 600;
    cursor: pointer; font-size: 13px; margin-left: auto;
}
.btn-close:hover { background: #e5e7eb; }

.error-text { color: #dc2626; font-weight: 500; }

.progress-bar {
    width: 100%; max-width: 300px; height: 8px;
    background: #e2e8f0; border-radius: 4px; overflow: hidden; margin-top: 12px;
}
.progress-bar-fill {
    height: 100%; background: linear-gradient(90deg, #4f46e5, #7c3aed);
    border-radius: 4px; animation: loading 1.5s ease-in-out infinite;
}
@keyframes loading {
    0% { width: 0%; margin-left: 0%; }
    50% { width: 60%; margin-left: 20%; }
    100% { width: 0%; margin-left: 100%; }
}

